<!DOCTYPE html>
<html>
<head>
	<title>Map Filter</title>
</head>
<body>
<div id="cunt">
	<button class="amenities-filter" data-map-include="true" data-amenity="employment">Employment</button>
	<button class="amenities-filter" data-map-include="true" data-amenity="etertainment">Entertainment</button>
	<button class="amenities-filter" data-map-include="true" data-amenity="hospital">Hospital</button>
	<button class="amenities-filter" data-map-include="true" data-amenity="school">School</button>
	<button class="amenities-filter" data-map-include="true" data-amenity="shopping">Shopping</button>
	<button class="amenities-filter" data-map-include="false" data-amenity="recreation">Recreation</button>
	<button class="amenities-filter" data-map-include="true" data-amenity="transport">Transport</button>
</div>

<p>Results are on console.</p>

<script type="text/javascript">

	var btn = document.getElementsByClassName('amenities-filter');
	for (var i = 0; i < btn.length; i++) {
		btn[i].addEventListener('click', (e) => {
			amenitiesFilter(e);
		});
	}

	const amenitiesFilter = (e) => {
		let included = JSON.parse(e.target.getAttribute('data-map-include')); // convert to boolean
		e.target.setAttribute('data-map-include', !included);
		compileAmenities();
	}

	const compileAmenities = () => {
		const amenitiesIncluded = [];
		const amenitiesAll = [...document.getElementsByClassName("amenities-filter")];
		for (const element of amenitiesAll) {
			if (element.getAttribute('data-map-include') == 'true') {
				const amenity = element.getAttribute('data-amenity');
				amenitiesIncluded.push(amenity);
			}
		}
		console.log(amenitiesIncluded);
	}

</script>

</body>
</html>
